var he=Object.defineProperty;var de=(o,e,s)=>e in o?he(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var u=(o,e,s)=>de(o,typeof e!="symbol"?e+"":e,s);import{x as ue,p as fe,d as ae,c as T,a as p,t as k,e as U,E as K,F as ne,l as ie,h as me,o as P,n as oe,_ as le,y as pe,i as ye,T as ve}from"./index-Dje41XHH.js";import{M as we}from"./MapRenderer-xkhg8OLD.js";const ge=["usp"],Se=["ak47","m4"];function O(o){const e=new Audio(o);return e.preload="auto",e}function lt(){const o=O("/audio/shot-gun.mp3"),e=O("/audio/shot-machine-gun.mp3"),s=O("/audio/reloading.mp3"),i=O("/audio/win-ct.mp3"),l=O("/audio/win-ter.mp3");function n(h){ge.includes(h)?(o.currentTime=0,o.play().catch(()=>{})):Se.includes(h)&&(e.currentTime=0,e.play().catch(()=>{}))}function t(){s.currentTime=0,s.play().catch(()=>{})}function d(){i.currentTime=0,i.play().catch(()=>{})}function f(){l.currentTime=0,l.play().catch(()=>{})}return{playShot:n,playReload:t,playWinCt:d,playWinTer:f}}function rt(o){const e=fe(!1);function s(){var h,y;const t=o.value;if(!t)return;const d=document;if(d.fullscreenElement??d.webkitFullscreenElement)return;const f=((h=t.requestFullscreen)==null?void 0:h.call(t))??((y=t.webkitRequestFullscreen)==null?void 0:y.call(t));f&&f.then(()=>{e.value=!0}).catch(()=>{})}function i(){var f,h;const t=document;if(!(t.fullscreenElement??t.webkitFullscreenElement))return;const d=((f=t.exitFullscreen)==null?void 0:f.call(t))??((h=t.webkitExitFullscreen)==null?void 0:h.call(t));d&&d.then(()=>{e.value=!1}).catch(()=>{})}function l(){e.value?i():s()}function n(){const t=document;e.value=!!(t.fullscreenElement??t.webkitFullscreenElement)}return typeof document<"u"&&(document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),ue(()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n)})),{isFullscreen:e,enter:s,exit:i,toggle:l}}const x=23,be={crate:30,barrel:20},G=2200,j=5e3,J=.85,ke=.008;function Q(o,e,s,i,l,n,t){const d=Math.max(i,Math.min(o,i+n)),f=Math.max(l,Math.min(e,l+t)),h=o-d,y=e-f;return h*h+y*y<=s*s}function ee(o,e,s,i){const{x:l,y:n,width:t,height:d}=i,f=Math.max(l,Math.min(o,l+t)),h=Math.max(n,Math.min(e,n+d)),y=o-f,m=e-h,a=y*y+m*m;if(a===0||a>=s*s)return{x:o,y:e};const c=Math.sqrt(a),g=s-c+.5,r=y/c,v=m/c;return{x:o+r*g,y:e+v*g}}function xe(o,e,s,i,l,n,t){const d=(l.right?1:0)-(l.left?1:0),f=(l.down?1:0)-(l.up?1:0),h=Math.sqrt(d*d+f*f),y=h>0?d/h:0,m=h>0?f/h:0;let a=s+y*j*t,c=i+m*j*t;const g=Math.sqrt(a*a+c*c);g>G&&(a=a/g*G,c=c/g*G),a*=J,c*=J;let r=o+a*t,v=e+c*t;r=Math.max(x,Math.min(n.width-x,r)),v=Math.max(x,Math.min(n.height-x,v));for(const S of n.walls)if(Q(r,v,x,S.x,S.y,S.width,S.height)){const D=ee(r,v,x,S);r=D.x,v=D.y;const A=Math.max(S.x,Math.min(r,S.x+S.width)),E=Math.max(S.y,Math.min(v,S.y+S.height)),M=(r-A)/x,C=(v-E)/x,w=a*M+c*C;w<0&&(a-=w*M*1.2,c-=w*C*1.2)}for(const S of n.obstacles){const D=be[S.type]??25,A=S.x,E=S.y,M=D,C=D;if(Q(r,v,x,A,E,M,C)){const w=ee(r,v,x,{x:A,y:E,width:M,height:C});r=w.x,v=w.y;const Y=Math.max(A,Math.min(r,A+M)),L=Math.max(E,Math.min(v,E+C)),W=(r-Y)/x,I=(v-L)/x,_=a*W+c*I;_<0&&(a-=_*W*1.2,c-=_*I*1.2)}}return{x:r,y:v,vx:a,vy:c}}function Pe(o,e,s,i){let{x:l,y:n,vx:t,vy:d,angle:f}=o,h=i;for(;h>0;){const y=Math.min(h,ke),m=xe(l,n,t,d,e,s,y);l=m.x,n=m.y,t=m.vx,d=m.vy,h-=y}return{x:l,y:n,vx:t,vy:d,angle:f}}const Me=150;class Ie{constructor(e){u(this,"buffer",[]);u(this,"getLerpValue");this.getLerpValue=e}add(e){const s=performance.now();for(this.buffer.push({data:e,timestamp:s});this.buffer.length>2&&s-this.buffer[0].timestamp>Me;)this.buffer.shift()}get(e=80){if(this.buffer.length===0)return null;const i=performance.now()-e;let l=this.buffer[0],n=this.buffer[1];if(!n||i>=n.timestamp)return this.buffer[this.buffer.length-1].data;if(i<=l.timestamp)return l.data;const t=(i-l.timestamp)/(n.timestamp-l.timestamp);return this.getLerpValue(l.data,n.data,t)}}const X=756,te=.1,se={usp:{len:20,width:3,color:"#aaa"},ak47:{len:30,width:3.5,color:"#8B7355"},m4:{len:28,width:3.5,color:"#666"}};class ct{constructor(e){u(this,"canvas");u(this,"ctx");u(this,"map");u(this,"mapRenderer");u(this,"localPlayerId");u(this,"onInput");u(this,"onShoot");u(this,"onReload");u(this,"onSwitchWeapon");u(this,"onOpenShop");u(this,"onHUDUpdate");u(this,"localState");u(this,"players",[]);u(this,"serverPlayers",new Map);u(this,"lastServerState",[]);u(this,"pickups",[]);u(this,"input",{up:!1,down:!1,left:!1,right:!1});u(this,"mouseDown",!1);u(this,"mouseX",0);u(this,"mouseY",0);u(this,"cameraX",0);u(this,"cameraY",0);u(this,"scale",.5);u(this,"fogOfWar",!0);u(this,"lastTime",0);u(this,"rafId",null);u(this,"resizeObserver",null);u(this,"networked");u(this,"inputSendInterval",0);u(this,"bulletTrails",[]);u(this,"cleanupInput");u(this,"lastRoundInfo");u(this,"lastRoundWins");this.canvas=e.canvas;const s=this.canvas.getContext("2d");if(!s)throw new Error("Canvas 2d context not available");this.ctx=s,this.map=e.map,this.localPlayerId=e.localPlayerId,this.onInput=e.onInput,this.onShoot=e.onShoot,this.onReload=e.onReload,this.onSwitchWeapon=e.onSwitchWeapon,this.onOpenShop=e.onOpenShop,this.onHUDUpdate=e.onHUDUpdate,this.networked=!!e.networked;const i=this.canvas.getBoundingClientRect();this.mapRenderer=new we(s,this.map,i.width,i.height),this.scale=Math.min(i.width/this.map.width,i.height/this.map.height)*.85;const l=this.map.spawnPoints.ct[0]||{x:100,y:100};this.localState={x:l.x+30,y:l.y+30,vx:0,vy:0,angle:0},this.cameraX=this.localState.x,this.cameraY=this.localState.y,this.setupInput()}setupInput(){const e=t=>{var f,h,y,m;if(t.code==="Tab"||t.code==="Escape")return;const d=t.repeat;switch(t.code){case"KeyW":this.input.up=!0;break;case"KeyS":this.input.down=!0;break;case"KeyA":this.input.left=!0;break;case"KeyD":this.input.right=!0;break;case"KeyR":d||(f=this.onReload)==null||f.call(this);break;case"KeyB":d||(h=this.onOpenShop)==null||h.call(this);break;case"Digit1":d||(y=this.onSwitchWeapon)==null||y.call(this,0);break;case"Digit2":d||(m=this.onSwitchWeapon)==null||m.call(this,1);break}},s=t=>{switch(t.code){case"KeyW":this.input.up=!1;break;case"KeyS":this.input.down=!1;break;case"KeyA":this.input.left=!1;break;case"KeyD":this.input.right=!1;break}},i=t=>{t.button===0&&(this.mouseDown=!0)},l=t=>{t.button===0&&(this.mouseDown=!1)},n=t=>{const d=this.canvas.getBoundingClientRect();this.mouseX=t.clientX-d.left,this.mouseY=t.clientY-d.top};window.addEventListener("keydown",e),window.addEventListener("keyup",s),this.canvas.addEventListener("mousemove",n),this.canvas.addEventListener("mousedown",i),window.addEventListener("mouseup",l),this.cleanupInput=()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",s),this.canvas.removeEventListener("mousemove",n),this.canvas.removeEventListener("mousedown",i),window.removeEventListener("mouseup",l)}}setPlayers(e){this.players=e}setServerState(e,s,i){s&&(this.pickups=s),i&&this.setRoundInfo(i.round,i.roundTimeLeft,i.roundWins),this.lastServerState=e;const l=(n,t,d)=>{let f=t.angle-n.angle;for(;f>Math.PI;)f-=Math.PI*2;for(;f<-Math.PI;)f+=Math.PI*2;return{...t,x:n.x+(t.x-n.x)*d,y:n.y+(t.y-n.y)*d,angle:n.angle+f*d}};e.forEach(n=>{let t=this.serverPlayers.get(n.id);t||(t=new Ie(l),this.serverPlayers.set(n.id,t)),t.add(n)})}addBulletTrail(e,s,i,l){this.bulletTrails.push({x1:e,y1:s,x2:i,y2:l,time:performance.now()})}setLocalPosition(e,s,i){this.localState.x=e,this.localState.y=s,this.localState.vx=0,this.localState.vy=0,i!==void 0&&(this.localState.angle=i)}setFogOfWar(e){this.fogOfWar=e}getLocalPlayerState(){const e=this.lastServerState.find(s=>s.id===this.localPlayerId);return e?{health:e.health,weapon:e.weapon,ammo:e.ammo,ammoReserve:e.ammoReserve,kills:e.kills,deaths:e.deaths,credits:e.credits,weapons:e.weapons,currentSlot:e.currentSlot}:null}getRoundInfo(){return this.lastRoundInfo??null}setRoundInfo(e,s,i){this.lastRoundInfo={round:e,roundTimeLeft:s},i&&(this.lastRoundWins=i)}getScore(){if(this.lastRoundWins)return{...this.lastRoundWins};let e=0,s=0;for(const i of this.lastServerState)i.team==="ct"?e+=i.kills:s+=i.kills;return{ct:e,t:s}}resize(){const e=this.canvas.getBoundingClientRect(),s=window.devicePixelRatio||1;this.canvas.width=e.width*s,this.canvas.height=e.height*s,this.ctx.scale(s,s),this.mapRenderer.setSize(e.width,e.height)}tick(e){var t,d,f;const s=Math.min((e-this.lastTime)/1e3,.1);this.lastTime=e;const[i,l]=this.mapRenderer.screenToWorld(this.mouseX,this.mouseY),n=Math.atan2(l-this.localState.y,i-this.localState.x);if(this.mouseDown&&((t=this.onShoot)==null||t.call(this)),!this.networked)this.localState=Pe(this.localState,this.input,this.map,s),this.localState.angle=n;else{const h=this.lastServerState.find(y=>y.id===this.localPlayerId);h&&(this.localState.x=h.x,this.localState.y=h.y,this.localState.angle=h.angle),this.localState.angle=n,this.inputSendInterval+=s,this.inputSendInterval>=.05&&(this.inputSendInterval=0,(d=this.onInput)==null||d.call(this,{x:this.localState.x,y:this.localState.y,angle:n,up:this.input.up,down:this.input.down,left:this.input.left,right:this.input.right}))}if(this.cameraX+=(this.localState.x-this.cameraX)*te,this.cameraY+=(this.localState.y-this.cameraY)*te,this.mapRenderer.setCamera(this.cameraX,this.cameraY,this.scale),this.networked&&this.onHUDUpdate){const h=this.getLocalPlayerState(),y=this.getScore(),m=this.getRoundInfo();h&&this.onHUDUpdate({...h,scoreCt:y.ct,scoreT:y.t,round:m==null?void 0:m.round,roundTimeLeft:m==null?void 0:m.roundTimeLeft})}this.render(),this.networked||(f=this.onInput)==null||f.call(this,{x:this.localState.x,y:this.localState.y,angle:this.localState.angle}),this.rafId=requestAnimationFrame(h=>this.tick(h))}render(){const{ctx:e,map:s,mapRenderer:i,localState:l,players:n}=this,t=l.x,d=l.y,f=this.scale;if(i.render(),i.renderPickups(this.pickups),e.save(),i.applyWorldTransform(e),this.fogOfWar){e.fillStyle="rgba(0,0,0,0.85)",e.beginPath(),e.rect(-1e3,-1e3,s.width+2e3,s.height+2e3),e.arc(t,d,X,0,Math.PI*2),e.fill("evenodd");const a=e.createRadialGradient(t,d,X*.3,t,d,X);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(.6,"rgba(0,0,0,0.2)"),a.addColorStop(1,"rgba(0,0,0,0.85)"),e.fillStyle=a,e.fillRect(-1e3,-1e3,s.width+2e3,s.height+2e3)}let h;if(this.networked){const a=[];this.serverPlayers.forEach((g,r)=>{if(r===this.localPlayerId)return;const v=g.get(80);v&&a.push({...v,userId:void 0,ammoReserve:v.ammoReserve,isLocal:!1})});const c=this.lastServerState.find(g=>g.id===this.localPlayerId);h=[...a,{id:this.localPlayerId,username:(c==null?void 0:c.username)??"You",team:(c==null?void 0:c.team)??"ct",x:l.x,y:l.y,angle:l.angle,health:(c==null?void 0:c.health)??100,weapon:(c==null?void 0:c.weapon)??"usp",ammo:(c==null?void 0:c.ammo)??0,ammoReserve:(c==null?void 0:c.ammoReserve)??0,isAlive:(c==null?void 0:c.isAlive)??!0,kills:(c==null?void 0:c.kills)??0,deaths:(c==null?void 0:c.deaths)??0,isLocal:!0}]}else h=[...n.filter(a=>a.id!==this.localPlayerId),{...l,id:this.localPlayerId,username:"You",team:"ct",x:l.x,y:l.y,angle:l.angle,health:100,weapon:"usp",ammo:0,ammoReserve:0,isAlive:!0,kills:0,deaths:0,isLocal:!0}];const y=performance.now(),m=120;this.bulletTrails=this.bulletTrails.filter(a=>y-a.time<m),this.bulletTrails.forEach(a=>{const c=(y-a.time)/m,g=.5*(1-c);e.strokeStyle=`rgba(255, 220, 100, ${g})`,e.lineWidth=(1.5-c)/f,e.beginPath(),e.moveTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.stroke()}),h.forEach(a=>{if(!(!this.fogOfWar||this.isVisible(t,d,a.x,a.y)))return;const g=a.team==="ct",r=x,v=a.angle,S=a.isAlive?g?"#2b4a7a":"#5c6b3a":"#3a3a3a",D=a.isAlive?g?"#1e3558":"#3e4a28":"#2a2a2a",A=a.isAlive?g?"#5a7ab0":"#c4a265":"#4a4a4a",E=a.isAlive?g?"#3a5a88":"#8a7040":"#333",M=a.isAlive?"#d4a574":"#555",C=a.isAlive?g?"#384e70":"#4a5530":"#333";if(a.isAlive&&(e.fillStyle="rgba(0,0,0,0.22)",e.beginPath(),e.ellipse(a.x+3,a.y+4,r*1.1,r*.85,v,0,Math.PI*2),e.fill()),e.save(),e.translate(a.x,a.y),e.rotate(v),a.isAlive){const w=-r*.35,Y=r*.55;e.fillStyle=a.isAlive?g?"#1e3050":"#3a4428":"#333",e.beginPath(),e.ellipse(w,-Y,r*.28,r*.22,0,0,Math.PI*2),e.fill(),e.beginPath(),e.ellipse(w,Y,r*.28,r*.22,0,0,Math.PI*2),e.fill(),e.fillStyle=D,e.beginPath(),e.ellipse(0,0,r*.72,r*.58,0,0,Math.PI*2),e.fill(),e.fillStyle=S,e.beginPath(),e.ellipse(0,0,r*.68,r*.54,0,0,Math.PI*2),e.fill(),e.strokeStyle=C,e.lineWidth=1.5,e.beginPath(),e.ellipse(0,0,r*.45,r*.35,0,0,Math.PI*2),e.stroke();const L=r*.55,W=r*.15,I=-Math.PI*.4,_=Math.cos(I)*L,H=Math.sin(I)*L;e.fillStyle=M,e.beginPath(),e.arc(_,H,W,0,Math.PI*2),e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),e.strokeStyle=S,e.lineWidth=r*.16,e.lineCap="round",e.beginPath(),e.moveTo(0,-r*.4),e.lineTo(_,H),e.stroke();const q=Math.PI*.2,N=L*.85,F=Math.cos(q)*N,B=Math.sin(q)*N;e.strokeStyle=S,e.lineWidth=r*.16,e.beginPath(),e.moveTo(0,r*.35),e.lineTo(F,B),e.stroke();const $=se[a.weapon]??se.usp,re=F,ce=B*.4,V=r+$.len,Z=0;e.strokeStyle=$.color,e.lineWidth=$.width,e.lineCap="round",e.beginPath(),e.moveTo(re,ce),e.lineTo(V,Z),e.stroke(),e.lineCap="butt",e.fillStyle="#222",e.beginPath(),e.arc(V,Z,2,0,Math.PI*2),e.fill(),e.fillStyle=M,e.beginPath(),e.arc(F,B,W,0,Math.PI*2),e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke();const R=r*.3,b=r*.32;e.fillStyle=E,e.beginPath(),e.arc(R,0,b+1.5,0,Math.PI*2),e.fill(),e.fillStyle=A,e.beginPath(),e.arc(R,0,b,0,Math.PI*2),e.fill(),g?(e.strokeStyle="#3d5c8a",e.lineWidth=2.5,e.beginPath(),e.arc(R,0,b*1.05,-Math.PI*.6,Math.PI*.6),e.stroke(),e.fillStyle="rgba(150,200,255,0.4)",e.fillRect(R+b*.3,-b*.3,b*.6,b*.6)):(e.fillStyle="rgba(30,25,20,0.5)",e.beginPath(),e.arc(R,0,b*.85,-Math.PI*.5,Math.PI*.5),e.fill(),e.fillStyle="#eee",e.fillRect(R+b*.2,-b*.15,b*.35,b*.3));const z=e.createRadialGradient(R-b*.2,-b*.2,b*.05,R,0,b);z.addColorStop(0,"rgba(255,255,255,0.2)"),z.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=z,e.beginPath(),e.arc(R,0,b,0,Math.PI*2),e.fill()}else{e.fillStyle="#3a3a3a",e.beginPath(),e.ellipse(0,0,r*.7,r*.5,0,0,Math.PI*2),e.fill(),e.strokeStyle="#666",e.lineWidth=2;const w=r*.35;e.beginPath(),e.moveTo(-w,-w),e.lineTo(w,w),e.moveTo(w,-w),e.lineTo(-w,w),e.stroke()}if(e.restore(),a.isLocal&&a.isAlive&&(e.strokeStyle="rgba(255,255,255,0.5)",e.lineWidth=1.5/f,e.beginPath(),e.arc(a.x,a.y,r+2,0,Math.PI*2),e.stroke()),a.isAlive&&a.health<100){const w=r*2.2,Y=3,L=a.x-w/2,W=a.y-r-10;e.fillStyle="rgba(0,0,0,0.5)",e.fillRect(L,W,w,Y);const I=Math.max(0,a.health/100),_=I>.5?"#4caf50":I>.25?"#ff9800":"#f44336";e.fillStyle=_,e.fillRect(L,W,w*I,Y)}a.isAlive&&(e.fillStyle=g?"rgba(120,180,255,0.85)":"rgba(255,180,100,0.85)",e.font="bold 9px sans-serif",e.textAlign="center",e.textBaseline="bottom",e.fillText(a.username,a.x,a.y-r-12))}),e.restore()}isVisible(e,s,i,l){const n=i-e,t=l-s;return n*n+t*t<=X*X}start(){this.resize(),this.resizeObserver=new ResizeObserver(()=>this.resize()),this.resizeObserver.observe(this.canvas),this.lastTime=performance.now(),this.rafId=requestAnimationFrame(e=>this.tick(e))}stop(){var e,s;(e=this.resizeObserver)==null||e.disconnect(),this.resizeObserver=null,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),(s=this.cleanupInput)==null||s.call(this)}}const Re={class:"hud"},Te={class:"hud-top"},Ae={class:"score"},Ee={class:"team-ct"},Ce={class:"team-t"},Le={key:0,class:"credits-bar"},We={key:1,class:"round-info"},_e={key:0,class:"round-timer"},De={class:"hud-bottom"},Ye={class:"hud-left"},Oe={class:"hp-bar"},Xe={class:"hp-text"},Ue={class:"weapon-slots"},Fe={class:"slot-key"},Be={key:1,class:"slot-icon-empty"},$e={class:"weapon-info"},ze={class:"weapon-name"},Ke={class:"ammo"},Ge={class:"hud-right"},He={class:"stats"},qe={class:"stat"},Ne={class:"stat"},Ve=ae({__name:"GameHUD",props:{health:{},weapon:{},ammo:{},ammoReserve:{},kills:{},deaths:{},scoreCt:{},scoreT:{},credits:{},weapons:{},currentSlot:{},round:{},roundTimeLeft:{}},setup(o){var d,f;const e=o,s={usp:"USP-S",ak47:"AK-47",m4:"M4A1"},i={usp:20,ak47:28,m4:26},l=[{key:0,label:"1",weapon:((d=e.weapons)==null?void 0:d[0])??null},{key:1,label:"2",weapon:((f=e.weapons)==null?void 0:f[1])??"usp"}];function n(h){var m;return((m=e.weapons)==null?void 0:m[h])??null}function t(h){return(e.currentSlot??1)===h}return(h,y)=>(P(),T("div",Re,[p("div",Te,[p("div",Ae,[p("span",Ee,k(o.scoreCt),1),y[0]||(y[0]=p("span",{class:"sep"},":",-1)),p("span",Ce,k(o.scoreT),1)]),o.credits!=null?(P(),T("div",Le," $"+k(o.credits),1)):U("",!0),o.round!=null?(P(),T("div",We,[p("span",null,"Раунд "+k(o.round),1),o.roundTimeLeft!=null?(P(),T("span",_e,k(Math.floor((o.roundTimeLeft??0)/60))+":"+k(String((o.roundTimeLeft??0)%60).padStart(2,"0")),1)):U("",!0)])):U("",!0)]),p("div",De,[p("div",Ye,[p("div",Oe,[p("div",{class:"hp-fill",style:K({width:`${o.health}%`})},null,4),p("span",Xe,k(o.health)+" HP",1)]),p("div",Ue,[(P(),T(ne,null,ie(l,m=>p("div",{key:m.key,class:oe(["weapon-slot",{selected:t(m.key),empty:!n(m.key)}])},[p("span",Fe,k(m.label),1),n(m.key)?(P(),T("span",{key:0,class:"slot-icon-bar",style:K({width:(i[n(m.key)]??18)+"px"})},null,4)):(P(),T("span",Be,"—"))],2)),64))]),p("div",$e,[p("span",ze,[p("span",{class:"weapon-icon-bar",style:K({width:(i[o.weapon]??18)+"px"})},null,4),me(" "+k(s[o.weapon]??o.weapon),1)]),p("span",Ke,k(o.ammo)+" / "+k(o.ammoReserve),1)])]),p("div",Ge,[p("div",He,[p("span",qe,"K: "+k(o.kills),1),p("span",Ne,"D: "+k(o.deaths),1)])])])]))}}),ht=le(Ve,[["__scopeId","data-v-80f8560d"]]),Ze={class:"shop-modal panel-cs"},je={class:"shop-header"},Je={class:"credits"},Qe={class:"shop-items"},et={class:"item-name"},tt={class:"item-price"},st=["disabled","onClick"],at=ae({__name:"ShopModal",props:{show:{type:Boolean},credits:{},weapons:{}},emits:["close","buy"],setup(o,{emit:e}){const s=e,i=[{id:"ak47",name:"AK-47",price:2700,slot:0},{id:"m4",name:"M4A1",price:3100,slot:0}];return(l,n)=>(P(),pe(ve,{to:"body"},[o.show?(P(),T("div",{key:0,class:"shop-overlay",onClick:n[0]||(n[0]=ye(t=>s("close"),["self"]))},[p("div",Ze,[p("div",je,[n[1]||(n[1]=p("h3",{class:"shop-title"},"МАГАЗИН",-1)),p("span",Je,"$"+k(o.credits),1)]),p("div",Qe,[(P(),T(ne,null,ie(i,t=>p("div",{key:t.id,class:oe(["shop-item",{disabled:o.credits<t.price||o.weapons[0]}])},[p("div",et,k(t.name),1),p("div",tt,"$"+k(t.price),1),p("button",{type:"button",class:"btn-cs btn-cs-primary btn-buy",disabled:o.credits<t.price||!!o.weapons[0],onClick:d=>s("buy",t.id)},k(o.weapons[0]?"Куплено":o.credits<t.price?"Недостаточно":"Купить"),9,st)],2)),64))]),n[2]||(n[2]=p("p",{class:"shop-hint"},"B — закрыть",-1))])])):U("",!0)]))}}),dt=le(at,[["__scopeId","data-v-5c2661ad"]]);export{ht as G,dt as S,lt as a,rt as b,ct as c,Pe as u};
