var ht=Object.defineProperty;var dt=(o,t,s)=>t in o?ht(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var u=(o,t,s)=>dt(o,typeof t!="symbol"?t+"":t,s);import{x as ut,p as mt,d as at,c as T,a as p,t as k,e as U,E as K,F as nt,l as it,h as ft,o as P,n as ot,_ as lt,y as pt,i as yt,T as vt}from"./index-AYzDde7z.js";import{M as wt}from"./MapRenderer-CCBU4K5V.js";const gt=["usp"],St=["ak47","m4"];function O(o){const t=new Audio(o);return t.preload="auto",t}function le(){const o=O("/audio/shot-gun.mp3"),t=O("/audio/shot-machine-gun.mp3"),s=O("/audio/reloading.mp3"),i=O("/audio/win-ct.mp3"),l=O("/audio/win-ter.mp3"),n=O("/audio/add-ammunition.mp3"),e=O("/audio/add-hp.mp3");function h(c){gt.includes(c)?(o.currentTime=0,o.play().catch(()=>{})):St.includes(c)&&(t.currentTime=0,t.play().catch(()=>{}))}function m(){s.currentTime=0,s.play().catch(()=>{})}function d(){i.currentTime=0,i.play().catch(()=>{})}function y(){l.currentTime=0,l.play().catch(()=>{})}function f(){n.currentTime=0,n.play().catch(()=>{})}function a(){e.currentTime=0,e.play().catch(()=>{})}return{playShot:h,playReload:m,playWinCt:d,playWinTer:y,playPickupAmmo:f,playPickupMedkit:a}}function ce(o){const t=mt(!1);function s(){var d,y;const e=o.value;if(!e)return;const h=document;if(h.fullscreenElement??h.webkitFullscreenElement)return;const m=((d=e.requestFullscreen)==null?void 0:d.call(e))??((y=e.webkitRequestFullscreen)==null?void 0:y.call(e));m&&m.then(()=>{t.value=!0}).catch(()=>{})}function i(){var m,d;const e=document;if(!(e.fullscreenElement??e.webkitFullscreenElement))return;const h=((m=e.exitFullscreen)==null?void 0:m.call(e))??((d=e.webkitExitFullscreen)==null?void 0:d.call(e));h&&h.then(()=>{t.value=!1}).catch(()=>{})}function l(){t.value?i():s()}function n(){const e=document;t.value=!!(e.fullscreenElement??e.webkitFullscreenElement)}return typeof document<"u"&&(document.addEventListener("fullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),ut(()=>{document.removeEventListener("fullscreenchange",n),document.removeEventListener("webkitfullscreenchange",n)})),{isFullscreen:t,enter:s,exit:i,toggle:l}}const x=23,bt={crate:30,barrel:20},G=2200,j=5e3,J=.85,kt=.008;function Q(o,t,s,i,l,n,e){const h=Math.max(i,Math.min(o,i+n)),m=Math.max(l,Math.min(t,l+e)),d=o-h,y=t-m;return d*d+y*y<=s*s}function tt(o,t,s,i){const{x:l,y:n,width:e,height:h}=i,m=Math.max(l,Math.min(o,l+e)),d=Math.max(n,Math.min(t,n+h)),y=o-m,f=t-d,a=y*y+f*f;if(a===0||a>=s*s)return{x:o,y:t};const c=Math.sqrt(a),g=s-c+.5,r=y/c,v=f/c;return{x:o+r*g,y:t+v*g}}function xt(o,t,s,i,l,n,e){const h=(l.right?1:0)-(l.left?1:0),m=(l.down?1:0)-(l.up?1:0),d=Math.sqrt(h*h+m*m),y=d>0?h/d:0,f=d>0?m/d:0;let a=s+y*j*e,c=i+f*j*e;const g=Math.sqrt(a*a+c*c);g>G&&(a=a/g*G,c=c/g*G),a*=J,c*=J;let r=o+a*e,v=t+c*e;r=Math.max(x,Math.min(n.width-x,r)),v=Math.max(x,Math.min(n.height-x,v));for(const S of n.walls)if(Q(r,v,x,S.x,S.y,S.width,S.height)){const D=tt(r,v,x,S);r=D.x,v=D.y;const A=Math.max(S.x,Math.min(r,S.x+S.width)),E=Math.max(S.y,Math.min(v,S.y+S.height)),M=(r-A)/x,C=(v-E)/x,w=a*M+c*C;w<0&&(a-=w*M*1.2,c-=w*C*1.2)}for(const S of n.obstacles){const D=bt[S.type]??25,A=S.x,E=S.y,M=D,C=D;if(Q(r,v,x,A,E,M,C)){const w=tt(r,v,x,{x:A,y:E,width:M,height:C});r=w.x,v=w.y;const Y=Math.max(A,Math.min(r,A+M)),L=Math.max(E,Math.min(v,E+C)),W=(r-Y)/x,I=(v-L)/x,_=a*W+c*I;_<0&&(a-=_*W*1.2,c-=_*I*1.2)}}return{x:r,y:v,vx:a,vy:c}}function Pt(o,t,s,i){let{x:l,y:n,vx:e,vy:h,angle:m}=o,d=i;for(;d>0;){const y=Math.min(d,kt),f=xt(l,n,e,h,t,s,y);l=f.x,n=f.y,e=f.vx,h=f.vy,d-=y}return{x:l,y:n,vx:e,vy:h,angle:m}}const Mt=150;class It{constructor(t){u(this,"buffer",[]);u(this,"getLerpValue");this.getLerpValue=t}add(t){const s=performance.now();for(this.buffer.push({data:t,timestamp:s});this.buffer.length>2&&s-this.buffer[0].timestamp>Mt;)this.buffer.shift()}get(t=80){if(this.buffer.length===0)return null;const i=performance.now()-t;let l=this.buffer[0],n=this.buffer[1];if(!n||i>=n.timestamp)return this.buffer[this.buffer.length-1].data;if(i<=l.timestamp)return l.data;const e=(i-l.timestamp)/(n.timestamp-l.timestamp);return this.getLerpValue(l.data,n.data,e)}}const X=756,et=.1,st={usp:{len:20,width:3,color:"#aaa"},ak47:{len:30,width:3.5,color:"#8B7355"},m4:{len:28,width:3.5,color:"#666"}};class re{constructor(t){u(this,"canvas");u(this,"ctx");u(this,"map");u(this,"mapRenderer");u(this,"localPlayerId");u(this,"onInput");u(this,"onShoot");u(this,"onReload");u(this,"onSwitchWeapon");u(this,"onOpenShop");u(this,"onHUDUpdate");u(this,"localState");u(this,"players",[]);u(this,"serverPlayers",new Map);u(this,"lastServerState",[]);u(this,"pickups",[]);u(this,"input",{up:!1,down:!1,left:!1,right:!1});u(this,"mouseDown",!1);u(this,"mouseX",0);u(this,"mouseY",0);u(this,"cameraX",0);u(this,"cameraY",0);u(this,"scale",.5);u(this,"fogOfWar",!0);u(this,"lastTime",0);u(this,"rafId",null);u(this,"resizeObserver",null);u(this,"networked");u(this,"inputSendInterval",0);u(this,"bulletTrails",[]);u(this,"cleanupInput");u(this,"lastRoundInfo");u(this,"lastRoundWins");this.canvas=t.canvas;const s=this.canvas.getContext("2d");if(!s)throw new Error("Canvas 2d context not available");this.ctx=s,this.map=t.map,this.localPlayerId=t.localPlayerId,this.onInput=t.onInput,this.onShoot=t.onShoot,this.onReload=t.onReload,this.onSwitchWeapon=t.onSwitchWeapon,this.onOpenShop=t.onOpenShop,this.onHUDUpdate=t.onHUDUpdate,this.networked=!!t.networked;const i=this.canvas.getBoundingClientRect();this.mapRenderer=new wt(s,this.map,i.width,i.height),this.scale=Math.min(i.width/this.map.width,i.height/this.map.height)*.85;const l=this.map.spawnPoints.ct[0]||{x:100,y:100};this.localState={x:l.x+30,y:l.y+30,vx:0,vy:0,angle:0},this.cameraX=this.localState.x,this.cameraY=this.localState.y,this.setupInput()}setupInput(){const t=e=>{var m,d,y,f;if(e.code==="Tab"||e.code==="Escape")return;const h=e.repeat;switch(e.code){case"KeyW":this.input.up=!0;break;case"KeyS":this.input.down=!0;break;case"KeyA":this.input.left=!0;break;case"KeyD":this.input.right=!0;break;case"KeyR":h||(m=this.onReload)==null||m.call(this);break;case"KeyB":h||(d=this.onOpenShop)==null||d.call(this);break;case"Digit1":h||(y=this.onSwitchWeapon)==null||y.call(this,0);break;case"Digit2":h||(f=this.onSwitchWeapon)==null||f.call(this,1);break}},s=e=>{switch(e.code){case"KeyW":this.input.up=!1;break;case"KeyS":this.input.down=!1;break;case"KeyA":this.input.left=!1;break;case"KeyD":this.input.right=!1;break}},i=e=>{e.button===0&&(this.mouseDown=!0)},l=e=>{e.button===0&&(this.mouseDown=!1)},n=e=>{const h=this.canvas.getBoundingClientRect();this.mouseX=e.clientX-h.left,this.mouseY=e.clientY-h.top};window.addEventListener("keydown",t),window.addEventListener("keyup",s),this.canvas.addEventListener("mousemove",n),this.canvas.addEventListener("mousedown",i),window.addEventListener("mouseup",l),this.cleanupInput=()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",s),this.canvas.removeEventListener("mousemove",n),this.canvas.removeEventListener("mousedown",i),window.removeEventListener("mouseup",l)}}setPlayers(t){this.players=t}setServerState(t,s,i){s&&(this.pickups=s),i&&this.setRoundInfo(i.round,i.roundTimeLeft,i.roundWins),this.lastServerState=t;const l=(n,e,h)=>{let m=e.angle-n.angle;for(;m>Math.PI;)m-=Math.PI*2;for(;m<-Math.PI;)m+=Math.PI*2;return{...e,x:n.x+(e.x-n.x)*h,y:n.y+(e.y-n.y)*h,angle:n.angle+m*h}};t.forEach(n=>{let e=this.serverPlayers.get(n.id);e||(e=new It(l),this.serverPlayers.set(n.id,e)),e.add(n)})}addBulletTrail(t,s,i,l){this.bulletTrails.push({x1:t,y1:s,x2:i,y2:l,time:performance.now()})}setLocalPosition(t,s,i){this.localState.x=t,this.localState.y=s,this.localState.vx=0,this.localState.vy=0,i!==void 0&&(this.localState.angle=i)}setFogOfWar(t){this.fogOfWar=t}getLocalPlayerState(){const t=this.lastServerState.find(s=>s.id===this.localPlayerId);return t?{health:t.health,weapon:t.weapon,ammo:t.ammo,ammoReserve:t.ammoReserve,kills:t.kills,deaths:t.deaths,credits:t.credits,weapons:t.weapons,currentSlot:t.currentSlot}:null}getRoundInfo(){return this.lastRoundInfo??null}setRoundInfo(t,s,i){this.lastRoundInfo={round:t,roundTimeLeft:s},i&&(this.lastRoundWins=i)}getScore(){if(this.lastRoundWins)return{...this.lastRoundWins};let t=0,s=0;for(const i of this.lastServerState)i.team==="ct"?t+=i.kills:s+=i.kills;return{ct:t,t:s}}resize(){const t=this.canvas.getBoundingClientRect(),s=window.devicePixelRatio||1;this.canvas.width=t.width*s,this.canvas.height=t.height*s,this.ctx.scale(s,s),this.mapRenderer.setSize(t.width,t.height)}tick(t){var e,h,m;const s=Math.min((t-this.lastTime)/1e3,.1);this.lastTime=t;const[i,l]=this.mapRenderer.screenToWorld(this.mouseX,this.mouseY),n=Math.atan2(l-this.localState.y,i-this.localState.x);if(this.mouseDown&&((e=this.onShoot)==null||e.call(this)),!this.networked)this.localState=Pt(this.localState,this.input,this.map,s),this.localState.angle=n;else{const d=this.lastServerState.find(y=>y.id===this.localPlayerId);d&&(this.localState.x=d.x,this.localState.y=d.y,this.localState.angle=d.angle),this.localState.angle=n,this.inputSendInterval+=s,this.inputSendInterval>=.05&&(this.inputSendInterval=0,(h=this.onInput)==null||h.call(this,{x:this.localState.x,y:this.localState.y,angle:n,up:this.input.up,down:this.input.down,left:this.input.left,right:this.input.right}))}if(this.cameraX+=(this.localState.x-this.cameraX)*et,this.cameraY+=(this.localState.y-this.cameraY)*et,this.mapRenderer.setCamera(this.cameraX,this.cameraY,this.scale),this.networked&&this.onHUDUpdate){const d=this.getLocalPlayerState(),y=this.getScore(),f=this.getRoundInfo();d&&this.onHUDUpdate({...d,scoreCt:y.ct,scoreT:y.t,round:f==null?void 0:f.round,roundTimeLeft:f==null?void 0:f.roundTimeLeft})}this.render(),this.networked||(m=this.onInput)==null||m.call(this,{x:this.localState.x,y:this.localState.y,angle:this.localState.angle}),this.rafId=requestAnimationFrame(d=>this.tick(d))}render(){const{ctx:t,map:s,mapRenderer:i,localState:l,players:n}=this,e=l.x,h=l.y,m=this.scale;if(i.render(),i.renderPickups(this.pickups),t.save(),i.applyWorldTransform(t),this.fogOfWar){t.fillStyle="rgba(0,0,0,0.85)",t.beginPath(),t.rect(-1e3,-1e3,s.width+2e3,s.height+2e3),t.arc(e,h,X,0,Math.PI*2),t.fill("evenodd");const a=t.createRadialGradient(e,h,X*.3,e,h,X);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(.6,"rgba(0,0,0,0.2)"),a.addColorStop(1,"rgba(0,0,0,0.85)"),t.fillStyle=a,t.fillRect(-1e3,-1e3,s.width+2e3,s.height+2e3)}let d;if(this.networked){const a=[];this.serverPlayers.forEach((g,r)=>{if(r===this.localPlayerId)return;const v=g.get(80);v&&a.push({...v,userId:void 0,ammoReserve:v.ammoReserve,isLocal:!1})});const c=this.lastServerState.find(g=>g.id===this.localPlayerId);d=[...a,{id:this.localPlayerId,username:(c==null?void 0:c.username)??"You",team:(c==null?void 0:c.team)??"ct",x:l.x,y:l.y,angle:l.angle,health:(c==null?void 0:c.health)??100,weapon:(c==null?void 0:c.weapon)??"usp",ammo:(c==null?void 0:c.ammo)??0,ammoReserve:(c==null?void 0:c.ammoReserve)??0,isAlive:(c==null?void 0:c.isAlive)??!0,kills:(c==null?void 0:c.kills)??0,deaths:(c==null?void 0:c.deaths)??0,isLocal:!0}]}else d=[...n.filter(a=>a.id!==this.localPlayerId),{...l,id:this.localPlayerId,username:"You",team:"ct",x:l.x,y:l.y,angle:l.angle,health:100,weapon:"usp",ammo:0,ammoReserve:0,isAlive:!0,kills:0,deaths:0,isLocal:!0}];const y=performance.now(),f=120;this.bulletTrails=this.bulletTrails.filter(a=>y-a.time<f),this.bulletTrails.forEach(a=>{const c=(y-a.time)/f,g=.5*(1-c);t.strokeStyle=`rgba(255, 220, 100, ${g})`,t.lineWidth=(1.5-c)/m,t.beginPath(),t.moveTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.stroke()}),d.forEach(a=>{if(!(!this.fogOfWar||this.isVisible(e,h,a.x,a.y)))return;const g=a.team==="ct",r=x*1.3,v=a.angle,S=a.isAlive?g?"#2b4a7a":"#5c6b3a":"#3a3a3a",D=a.isAlive?g?"#1e3558":"#3e4a28":"#2a2a2a",A=a.isAlive?g?"#5a7ab0":"#c4a265":"#4a4a4a",E=a.isAlive?g?"#3a5a88":"#8a7040":"#333",M=a.isAlive?"#d4a574":"#555",C=a.isAlive?g?"#384e70":"#4a5530":"#333";if(a.isAlive&&(t.fillStyle="rgba(0,0,0,0.22)",t.beginPath(),t.ellipse(a.x+3,a.y+4,r*1.1,r*.85,v,0,Math.PI*2),t.fill()),t.save(),t.translate(a.x,a.y),t.rotate(v),a.isAlive){const w=-r*.35,Y=r*.55;t.fillStyle=a.isAlive?g?"#1e3050":"#3a4428":"#333",t.beginPath(),t.ellipse(w,-Y,r*.28,r*.22,0,0,Math.PI*2),t.fill(),t.beginPath(),t.ellipse(w,Y,r*.28,r*.22,0,0,Math.PI*2),t.fill(),t.fillStyle=D,t.beginPath(),t.ellipse(0,0,r*.72,r*.58,0,0,Math.PI*2),t.fill(),t.fillStyle=S,t.beginPath(),t.ellipse(0,0,r*.68,r*.54,0,0,Math.PI*2),t.fill(),t.strokeStyle=C,t.lineWidth=1.5,t.beginPath(),t.ellipse(0,0,r*.45,r*.35,0,0,Math.PI*2),t.stroke();const L=r*.55,W=r*.15,I=-Math.PI*.4,_=Math.cos(I)*L,H=Math.sin(I)*L;t.fillStyle=M,t.beginPath(),t.arc(_,H,W,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(0,0,0,0.3)",t.lineWidth=1,t.stroke(),t.strokeStyle=S,t.lineWidth=r*.16,t.lineCap="round",t.beginPath(),t.moveTo(0,-r*.4),t.lineTo(_,H),t.stroke();const q=Math.PI*.2,N=L*.85,F=Math.cos(q)*N,B=Math.sin(q)*N;t.strokeStyle=S,t.lineWidth=r*.16,t.beginPath(),t.moveTo(0,r*.35),t.lineTo(F,B),t.stroke();const $=st[a.weapon]??st.usp,ct=F,rt=B*.4,V=r+$.len,Z=0;t.strokeStyle=$.color,t.lineWidth=$.width,t.lineCap="round",t.beginPath(),t.moveTo(ct,rt),t.lineTo(V,Z),t.stroke(),t.lineCap="butt",t.fillStyle="#222",t.beginPath(),t.arc(V,Z,2,0,Math.PI*2),t.fill(),t.fillStyle=M,t.beginPath(),t.arc(F,B,W,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(0,0,0,0.3)",t.lineWidth=1,t.stroke();const R=r*.3,b=r*.32;t.fillStyle=E,t.beginPath(),t.arc(R,0,b+1.5,0,Math.PI*2),t.fill(),t.fillStyle=A,t.beginPath(),t.arc(R,0,b,0,Math.PI*2),t.fill(),g?(t.strokeStyle="#3d5c8a",t.lineWidth=2.5,t.beginPath(),t.arc(R,0,b*1.05,-Math.PI*.6,Math.PI*.6),t.stroke(),t.fillStyle="rgba(150,200,255,0.4)",t.fillRect(R+b*.3,-b*.3,b*.6,b*.6)):(t.fillStyle="rgba(30,25,20,0.5)",t.beginPath(),t.arc(R,0,b*.85,-Math.PI*.5,Math.PI*.5),t.fill(),t.fillStyle="#eee",t.fillRect(R+b*.2,-b*.15,b*.35,b*.3));const z=t.createRadialGradient(R-b*.2,-b*.2,b*.05,R,0,b);z.addColorStop(0,"rgba(255,255,255,0.2)"),z.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=z,t.beginPath(),t.arc(R,0,b,0,Math.PI*2),t.fill()}else{t.fillStyle="#3a3a3a",t.beginPath(),t.ellipse(0,0,r*.7,r*.5,0,0,Math.PI*2),t.fill(),t.strokeStyle="#666",t.lineWidth=2;const w=r*.35;t.beginPath(),t.moveTo(-w,-w),t.lineTo(w,w),t.moveTo(w,-w),t.lineTo(-w,w),t.stroke()}if(t.restore(),a.isLocal&&a.isAlive&&(t.strokeStyle="rgba(255,255,255,0.5)",t.lineWidth=1.5/m,t.beginPath(),t.arc(a.x,a.y,r+2,0,Math.PI*2),t.stroke()),a.isAlive&&a.health<100){const w=r*2.2,Y=3,L=a.x-w/2,W=a.y-r-10;t.fillStyle="rgba(0,0,0,0.5)",t.fillRect(L,W,w,Y);const I=Math.max(0,a.health/100),_=I>.5?"#4caf50":I>.25?"#ff9800":"#f44336";t.fillStyle=_,t.fillRect(L,W,w*I,Y)}a.isAlive&&(t.fillStyle=g?"rgba(120,180,255,0.85)":"rgba(255,180,100,0.85)",t.font="bold 9px sans-serif",t.textAlign="center",t.textBaseline="bottom",t.fillText(a.username,a.x,a.y-r-12))}),t.restore()}isVisible(t,s,i,l){const n=i-t,e=l-s;return n*n+e*e<=X*X}start(){this.resize(),this.resizeObserver=new ResizeObserver(()=>this.resize()),this.resizeObserver.observe(this.canvas),this.lastTime=performance.now(),this.rafId=requestAnimationFrame(t=>this.tick(t))}stop(){var t,s;(t=this.resizeObserver)==null||t.disconnect(),this.resizeObserver=null,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null),(s=this.cleanupInput)==null||s.call(this)}}const Rt={class:"hud"},Tt={class:"hud-top"},At={class:"score"},Et={class:"team-ct"},Ct={class:"team-t"},Lt={key:0,class:"credits-bar"},Wt={key:1,class:"round-info"},_t={key:0,class:"round-timer"},Dt={class:"hud-bottom"},Yt={class:"hud-left"},Ot={class:"hp-bar"},Xt={class:"hp-text"},Ut={class:"weapon-slots"},Ft={class:"slot-key"},Bt={key:1,class:"slot-icon-empty"},$t={class:"weapon-info"},zt={class:"weapon-name"},Kt={class:"ammo"},Gt={class:"hud-right"},Ht={class:"stats"},qt={class:"stat"},Nt={class:"stat"},Vt=at({__name:"GameHUD",props:{health:{},weapon:{},ammo:{},ammoReserve:{},kills:{},deaths:{},scoreCt:{},scoreT:{},credits:{},weapons:{},currentSlot:{},round:{},roundTimeLeft:{}},setup(o){var h,m;const t=o,s={usp:"USP-S",ak47:"AK-47",m4:"M4A1"},i={usp:20,ak47:28,m4:26},l=[{key:0,label:"1",weapon:((h=t.weapons)==null?void 0:h[0])??null},{key:1,label:"2",weapon:((m=t.weapons)==null?void 0:m[1])??"usp"}];function n(d){var f;return((f=t.weapons)==null?void 0:f[d])??null}function e(d){return(t.currentSlot??1)===d}return(d,y)=>(P(),T("div",Rt,[p("div",Tt,[p("div",At,[p("span",Et,k(o.scoreCt),1),y[0]||(y[0]=p("span",{class:"sep"},":",-1)),p("span",Ct,k(o.scoreT),1)]),o.credits!=null?(P(),T("div",Lt," $"+k(o.credits),1)):U("",!0),o.round!=null?(P(),T("div",Wt,[p("span",null,"Раунд "+k(o.round),1),o.roundTimeLeft!=null?(P(),T("span",_t,k(Math.floor((o.roundTimeLeft??0)/60))+":"+k(String((o.roundTimeLeft??0)%60).padStart(2,"0")),1)):U("",!0)])):U("",!0)]),p("div",Dt,[p("div",Yt,[p("div",Ot,[p("div",{class:"hp-fill",style:K({width:`${o.health}%`})},null,4),p("span",Xt,k(o.health)+" HP",1)]),p("div",Ut,[(P(),T(nt,null,it(l,f=>p("div",{key:f.key,class:ot(["weapon-slot",{selected:e(f.key),empty:!n(f.key)}])},[p("span",Ft,k(f.label),1),n(f.key)?(P(),T("span",{key:0,class:"slot-icon-bar",style:K({width:(i[n(f.key)]??18)+"px"})},null,4)):(P(),T("span",Bt,"—"))],2)),64))]),p("div",$t,[p("span",zt,[p("span",{class:"weapon-icon-bar",style:K({width:(i[o.weapon]??18)+"px"})},null,4),ft(" "+k(s[o.weapon]??o.weapon),1)]),p("span",Kt,k(o.ammo)+" / "+k(o.ammoReserve),1)])]),p("div",Gt,[p("div",Ht,[p("span",qt,"K: "+k(o.kills),1),p("span",Nt,"D: "+k(o.deaths),1)])])])]))}}),he=lt(Vt,[["__scopeId","data-v-80f8560d"]]),Zt={class:"shop-modal panel-cs"},jt={class:"shop-header"},Jt={class:"credits"},Qt={class:"shop-items"},te={class:"item-name"},ee={class:"item-price"},se=["disabled","onClick"],ae=at({__name:"ShopModal",props:{show:{type:Boolean},credits:{},weapons:{}},emits:["close","buy"],setup(o,{emit:t}){const s=t,i=[{id:"ak47",name:"AK-47",price:2700,slot:0},{id:"m4",name:"M4A1",price:3100,slot:0}];return(l,n)=>(P(),pt(vt,{to:"body"},[o.show?(P(),T("div",{key:0,class:"shop-overlay",onClick:n[0]||(n[0]=yt(e=>s("close"),["self"]))},[p("div",Zt,[p("div",jt,[n[1]||(n[1]=p("h3",{class:"shop-title"},"МАГАЗИН",-1)),p("span",Jt,"$"+k(o.credits),1)]),p("div",Qt,[(P(),T(nt,null,it(i,e=>p("div",{key:e.id,class:ot(["shop-item",{disabled:o.credits<e.price||o.weapons[0]}])},[p("div",te,k(e.name),1),p("div",ee,"$"+k(e.price),1),p("button",{type:"button",class:"btn-cs btn-cs-primary btn-buy",disabled:o.credits<e.price||!!o.weapons[0],onClick:h=>s("buy",e.id)},k(o.weapons[0]?"Куплено":o.credits<e.price?"Недостаточно":"Купить"),9,se)],2)),64))]),n[2]||(n[2]=p("p",{class:"shop-hint"},"B — закрыть",-1))])])):U("",!0)]))}}),de=lt(ae,[["__scopeId","data-v-5c2661ad"]]);export{he as G,de as S,le as a,ce as b,re as c,Pt as u};
